<!-- templates/chat_modal.html -->
<div class="modal-header">
    <button class="back"><i class="fas fa-arrow-left"></i></button>
    <img src="{{ url_for('uploaded_file', filename=chat_user.profile_pic) }}">
    <span>{{ chat_user.real_name }}</span>
    <small>{{ chat_user.username }}</small>
    <div class="dropdown">
        <button><i class="fas fa-ellipsis-v"></i></button>
        <div class="dropdown-content">
            <a>Customize name</a>
            <a>Change wallpaper</a>
            <a>Search</a>
            <a data-modal-url="/api/profile/{{ chat_user.username }}">View user</a>
            <a>Disappearing messages</a>
            <a data-action="block" data-user-id="{{ chat_user.id }}">Block</a>
            <a data-action="report" data-type="user" data-id="{{ chat_user.id }}">Report</a>
        </div>
    </div>
</div>
<div class="chat-messages">
    {% for msg in messages %}
    <div class="message {{ 'sent' if msg.sender_id == current_user.id else 'received' }}">
        {% if msg.content %}<p>{{ msg.content }}</p>{% endif %}
        {% if msg.media_url %}<img src="{{ url_for('uploaded_file', filename=msg.media_url) }}">{% endif %}
        <span>{{ msg.timestamp }}</span>
    </div>
    {% endfor %}
</div>
<form class="message-area" action="/api/send_message" method="post">
    <input type="hidden" name="receiver_id" value="{{ chat_user.id }}">
    <button type="button"><i class="fas fa-smile"></i></button>
    <button type="button"><i class="fas fa-paperclip"></i></button>
    <button type="button"><i class="fas fa-camera"></i></button>
    <button type="button"><i class="fas fa-microphone"></i></button>
    <input type="text" name="content" placeholder="Type a message">
    <button type="submit"><i class="fas fa-paper-plane"></i></button>
</form>
